# ShipTrack - Universal Package Tracking System

A modern, full-stack shipping tracking application that provides a unified interface for tracking packages across all major US carriers. Built with Next.js, Prisma, and TypeScript.

## üöÄ Features

- **Real Carrier API Integration**: Live tracking through FedEx API (sandbox)
- **Major Carrier Support**: Track packages from FedEx, USPS, and UPS
- **Smart Carrier Detection**: Automatically detects carrier based on tracking number format
- **Real-time Tracking**: Get up-to-date package status and location information
- **Graceful Fallback**: Automatic fallback to mock data when APIs are unavailable
- **User Authentication**: Secure JWT-based authentication system with tiered access
- **Tracking History**: Save and view tracking history for authenticated users (30 minutes cache)
- **Modern UI**: Beautiful, responsive interface built with Tailwind CSS
- **Type Safety**: Full TypeScript support throughout the application
- **Multi-Platform Deployment**: Support for both Vercel and Docker deployments

## üîê Authentication Strategy

ShipTrack implements a **tiered authentication system** that provides the best user experience:

### **Public Access (No Authentication Required)**

- ‚úÖ Basic package tracking functionality
- ‚úÖ Universal carrier support
- ‚úÖ Real-time tracking information
- ‚úÖ Smart carrier detection

### **Enhanced Features (Authentication Required)**

- üîí **Tracking History**: Save all your tracking searches
- üîí **Personalized Experience**: User-specific data and preferences

This approach ensures that:

- **Anyone can track packages** without creating an account (like real carrier websites)
- **Users are incentivized to sign up** for enhanced features
- **The system scales** from casual users to power users

## üõ†Ô∏è Tech Stack

- **Frontend**: Next.js 14 (App Router), React, TypeScript, Tailwind CSS
- **Backend**: Next.js API Routes, Prisma ORM
- **Database**: PostgreSQL
- **Authentication**: JWT with bcrypt password hashing
- **Validation**: Zod schema validation
- **Testing**: Jest (ready for implementation)
- **Containerization**: Docker
- **Deployment**: Vercel (recommended) or Docker containers

## üìã Prerequisites

- Node.js 18+
- npm or yarn
- Git
- Docker (for containerized deployment)

## üöÄ Quick Start

### Option 1: Local Development (Recommended for Development)

#### 1. Clone the Repository

```bash
git clone git@github.com:Hamil1/ShipTrack.git
cd ShipTrack
```

#### 2. Install Dependencies

```bash
npm install
```

#### 3. Set Up Environment Variables

Copy the example environment file and configure it for your setup:

```bash
cp .env.example .env
```

**Generate a Secure JWT Secret:**

Before editing the `.env` file, generate a secure JWT secret:

```bash
node -e "console.log('JWT_SECRET=\"' + require('crypto').randomBytes(64).toString('hex') + '\"')"
```

Copy the output and use it as your `JWT_SECRET` value in the `.env` file.

Then edit the `.env` file with your specific values. See `.env.example` for all available environment variables and their descriptions.

**Important Notes**:

- If you're using Docker, the database URL will be automatically configured by the Docker Compose environment variables.
- Carrier API keys are optional. The app will use mock data if APIs are not configured.
- **USPS API**: Has geographic restrictions and may not be available outside the US.
- **JWT_SECRET**: Must be a secure, random string. Never use the default placeholder value in production.

#### 4. Set Up Database

```bash
# Generate Prisma client
npx prisma generate

# For Local Development (without Docker)
# You'll need PostgreSQL installed locally, then:
npx prisma db push

# For Docker Development
./scripts/init-db.sh dev
```

#### 5. Run the Development Server

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000) to view the application.

### Option 2: Docker Development Environment

#### 1. Clone and Navigate

```bash
git clone git@github.com:Hamil1/ShipTrack.git
cd ShipTrack
```

#### 2. Configure JWT Secret

Use the same JWT secret you generated in the earlier step for your Docker environment. Update the `JWT_SECRET` value in your `docker-compose.yml` file or `.env` file as needed.

#### 3. Initialize Development Database

```bash
# Initialize the development database
./scripts/init-db.sh
```

#### 4. Run with Docker (Recommended)

```bash
# Using the convenience script
./scripts/docker-dev.sh

# Or manually
docker compose up --build
```

Access the app at [http://localhost:3001](http://localhost:3001)
Access the database at localhost:5433

## üê≥ Docker Commands

### Development

```bash
# Initialize development database
./scripts/init-db.sh

# Start development environment
docker compose up --build

# Start development environment (detached)
docker compose up --build -d

# View logs
docker compose logs -f shiptrack-app

# Stop development environment
docker compose down

# Stop development environment and remove orphaned containers
docker compose down --remove-orphans
```

## üìö API Documentation

### Authentication Endpoints

#### POST /api/auth/register

Register a new user account.

**Request Body:**

```json
{
  "name": "John Doe",
  "email": "john@example.com",
  "password": "password123"
}
```

**Response:**

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "user_id",
      "name": "John Doe",
      "email": "john@example.com",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    },
    "token": "jwt_token_here"
  },
  "message": "User registered successfully"
}
```

#### POST /api/auth/login

Authenticate a user and receive a JWT token.

**Request Body:**

```json
{
  "email": "john@example.com",
  "password": "password123"
}
```

**Response:**

```json
{
  "success": true,
  "data": {
    "user": {
      "id": "user_id",
      "name": "John Doe",
      "email": "john@example.com",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    },
    "token": "jwt_token_here"
  },
  "message": "Login successful"
}
```

### Tracking Endpoints

#### POST /api/track

Universal tracking endpoint that works for both authenticated and non-authenticated users.

**Request Body:**

```json
{
  "trackingNumber": "1Z999AA1234567890"
}
```

**Headers (optional):**

```
Authorization: Bearer <jwt_token>
```

**Response (Non-authenticated):**

```json
{
  "success": true,
  "data": {
    "trackingNumber": "1Z999AA1234567890",
    "carrier": "UPS",
    "status": "In Transit",
    "location": "Memphis, TN",
    "timestamp": "2024-01-01T12:00:00.000Z",
    "description": "Package in transit to next facility",
    "events": [...]
  },
  "message": "Tracking information retrieved for UPS (Sign up for enhanced features)"
}
```

**Response (Authenticated):**

```json
{
  "success": true,
  "data": {
    "trackingNumber": "1Z999AA1234567890",
    "carrier": "UPS",
    "status": "In Transit",
    "location": "Memphis, TN",
    "timestamp": "2024-01-01T12:00:00.000Z",
    "description": "Package in transit to next facility",
    "events": [...],
    "userFeatures": {
      "historySaved": true,
      "enhancedUpdates": true
    }
  },
  "message": "Tracking information retrieved for UPS (Enhanced features enabled)"
}
```

#### GET /api/track/[trackingNumber]

Get cached tracking information for a specific tracking number. This endpoint implements intelligent caching:

1. **Personal Cache**: For authenticated users, checks their personal tracking history first
2. **Global Cache**: Falls back to any user's recent tracking data
3. **Freshness Check**: Returns cached data if it's less than 30 minutes old
4. **Carrier API**: Calls carrier API if no fresh cached data exists
5. **Auto-Save**: Saves new tracking data to user's history if authenticated

**Headers (optional):**

```
Authorization: Bearer <jwt_token>
```

**Response (Cached):**

```json
{
  "success": true,
  "data": {
    "trackingNumber": "1Z999AA1234567890",
    "carrier": "UPS",
    "status": "In Transit",
    "location": "Memphis, TN",
    "timestamp": "2024-01-01T12:00:00.000Z",
    "description": "Package in transit to next facility",
    "events": [...]
  },
  "message": "Cached tracking information retrieved for UPS"
}
```

**Response (Fresh):**

```json
{
  "success": true,
  "data": {
    "trackingNumber": "1Z999AA1234567890",
    "carrier": "UPS",
    "status": "In Transit",
    "location": "Memphis, TN",
    "timestamp": "2024-01-01T12:00:00.000Z",
    "description": "Package in transit to next facility",
    "events": [...]
  },
  "message": "Fresh tracking information retrieved for UPS"
}
```

#### GET /api/track/history

Get all tracking history for the authenticated user (requires authentication).

**Headers (required):**

```
Authorization: Bearer <jwt_token>
```

**Response:**

```json
{
  "success": true,
  "data": [
    {
      "id": "history_id",
      "trackingNumber": "1Z999AA1234567890",
      "carrier": "UPS",
      "status": "In Transit",
      "location": "Memphis, TN",
      "timestamp": "2024-01-01T12:00:00.000Z",
      "description": "Package in transit to next facility",
      "createdAt": "2024-01-01T00:00:00.000Z",
      "updatedAt": "2024-01-01T00:00:00.000Z"
    }
  ],
  "message": "Tracking history retrieved successfully"
}
```

#### GET /api/track/history/[trackingNumber]

Get full tracking history for a specific tracking number (requires authentication).

**Headers (required):**

```
Authorization: Bearer <jwt_token>
```

## üîç Supported Carriers

| Carrier | Tracking Number Format   | Example                | API Status                 |
| ------- | ------------------------ | ---------------------- | -------------------------- |
| FedEx   | 12-14 digits             | 123456789012           | ‚úÖ Real API                |
| USPS    | 9xxx + 15-18 digits      | 9400100000000000000000 | ‚ö†Ô∏è Geographic Restrictions |
| UPS     | 1Z + 6 chars + 10 digits | 1Z999AA1234567890      | ‚ö†Ô∏è Credentials Required    |

## üèóÔ∏è Project Structure

```
ShipTrack/
‚îú‚îÄ‚îÄ .github/                          # GitHub Actions workflows
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml
‚îú‚îÄ‚îÄ .husky/                           # Git hooks configuration
‚îú‚îÄ‚îÄ config/                           # Carrier configuration files
‚îÇ   ‚îî‚îÄ‚îÄ carriers/
‚îÇ       ‚îú‚îÄ‚îÄ fedex.json
‚îÇ       ‚îú‚îÄ‚îÄ ups.json
‚îÇ       ‚îî‚îÄ‚îÄ usps.json
‚îú‚îÄ‚îÄ docs/                             # Documentation
‚îÇ   ‚îú‚îÄ‚îÄ CARRIER_ONBOARDING_README.md
‚îÇ   ‚îú‚îÄ‚îÄ DEPLOYMENT.md
‚îÇ   ‚îú‚îÄ‚îÄ README.md
‚îÇ   ‚îú‚îÄ‚îÄ TRACKING_STATUSES.md
‚îÇ   ‚îî‚îÄ‚îÄ USPS_API_TROUBLESHOOTING.md
‚îú‚îÄ‚îÄ prisma/                           # Database schema and migrations
‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma
‚îú‚îÄ‚îÄ public/                           # Static assets
‚îÇ   ‚îú‚îÄ‚îÄ carriers/                     # Carrier logo SVGs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ fedex.svg
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ups.svg
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ usps.svg
‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ scripts/                          # Development and deployment scripts
‚îÇ   ‚îú‚îÄ‚îÄ cleanup.sh
‚îÇ   ‚îú‚îÄ‚îÄ docker-dev-hot-reload.sh
‚îÇ   ‚îú‚îÄ‚îÄ docker-dev.sh
‚îÇ   ‚îú‚îÄ‚îÄ docker-prod.sh
‚îÇ   ‚îî‚îÄ‚îÄ init-db.sh
‚îú‚îÄ‚îÄ src/                              # Application source code
‚îÇ   ‚îú‚îÄ‚îÄ app/                          # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                      # API routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/                 # Authentication endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validate/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ track/                # Tracking endpoints
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ [trackingNumber]/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ history/
‚îÇ   ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ [trackingNumber]/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ globals.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ page.tsx
‚îÇ   ‚îú‚îÄ‚îÄ components/                   # React components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/                   # Reusable UI components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Card.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CarrierBadge.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ErrorDisplay.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthPrompt.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LoginForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RegisterForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrackingForm.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrackingHistory.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrackingResult.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserMenu.tsx
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                     # React contexts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx
‚îÇ   ‚îú‚îÄ‚îÄ lib/                          # Library configurations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma.ts
‚îÇ   ‚îú‚îÄ‚îÄ providers/                    # Carrier API providers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseCarrierProvider.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FedExProvider.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UPSProvider.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ USPSProvider.ts
‚îÇ   ‚îú‚îÄ‚îÄ services/                     # Business logic services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CarrierRegistry.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TrackingService.ts
‚îÇ   ‚îú‚îÄ‚îÄ types/                        # TypeScript type definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ carrier.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îÇ   ‚îî‚îÄ‚îÄ utils/                        # Utility functions
‚îÇ       ‚îú‚îÄ‚îÄ __tests__/                # Test files
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ auth.test.ts
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ carrierDetection.test.ts
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ trackingService.test.ts
‚îÇ       ‚îú‚îÄ‚îÄ auth.ts
‚îÇ       ‚îú‚îÄ‚îÄ carrierDetection.ts
‚îÇ       ‚îú‚îÄ‚îÄ carrierDetection.test.ts
‚îÇ       ‚îú‚îÄ‚îÄ carrierLogos.ts
‚îÇ       ‚îî‚îÄ‚îÄ trackingService.ts
‚îú‚îÄ‚îÄ .dockerignore
‚îú‚îÄ‚îÄ .env                              # Environment variables
‚îú‚îÄ‚îÄ .env.example                      # Environment variables template
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ docker-compose.yml                # Docker Compose configuration
‚îú‚îÄ‚îÄ Dockerfile                        # Production Dockerfile
‚îú‚îÄ‚îÄ Dockerfile.dev                    # Development Dockerfile
‚îú‚îÄ‚îÄ eslint.config.mjs                 # ESLint configuration
‚îú‚îÄ‚îÄ jest.config.js                    # Jest test configuration
‚îú‚îÄ‚îÄ jest.setup.js                     # Jest setup file
‚îú‚îÄ‚îÄ next-env.d.ts                     # Next.js TypeScript definitions
‚îú‚îÄ‚îÄ next.config.ts                    # Next.js configuration
‚îú‚îÄ‚îÄ package.json                      # Node.js dependencies and scripts
‚îú‚îÄ‚îÄ postcss.config.mjs                # PostCSS configuration
‚îú‚îÄ‚îÄ README.md                         # Project documentation
‚îú‚îÄ‚îÄ tsconfig.json                     # TypeScript configuration
‚îú‚îÄ‚îÄ tsconfig.tsbuildinfo              # TypeScript build info
‚îî‚îÄ‚îÄ vercel.json                       # Vercel deployment configuration
```

## üß™ Testing

The application includes comprehensive test coverage for critical functionality:

### Running Tests

```bash
# Run all tests
npm test

# Run tests in watch mode
npm run test:watch

# Run tests with coverage
npm run test:coverage
```

## üîß Development

### Database Management

```bash
# View database in Prisma Studio
npx prisma studio

# Reset database
npx prisma db push --force-reset

# Generate migration
npx prisma migrate dev --name <migration_name>
```

### Code Quality

```bash
# Run ESLint
npm run lint

# Run TypeScript check
npm run type-check

# Format code
npm run format

# Run tests (automatically runs before git commit)
npm test
```

### Git Hooks

The project uses Husky to ensure code quality:

- **Pre-commit**: Runs tests before each commit

This ensures that broken code cannot be committed to the repository.

## üêõ Known Issues & Limitations

- **API Integration Status**:
  - ‚úÖ FedEx: Full API integration working (sandbox)
  - ‚ö†Ô∏è USPS: Geographic restrictions may apply (US-based users only)
  - ‚ö†Ô∏è UPS: Requires valid OAuth credentials
- **Caching**: Basic caching implemented. Consider Redis for production caching.
- **Real-time Updates**: Polling-based updates. Consider WebSockets for real-time functionality.

---

**Note**: This is a technical assessment project. For production use, additional security measures, error handling, and carrier API integrations would be required.


# How to test the app:
<img width="1442" height="970" alt="image" src="https://github.com/user-attachments/assets/4325d9f3-fb5c-4710-9403-de913e20cc14" />
<img width="1351" height="969" alt="image" src="https://github.com/user-attachments/assets/f0926a88-1c49-41d4-bb8d-3e39dec402b4" />
<img width="1576" height="1075" alt="image" src="https://github.com/user-attachments/assets/aa5f9e3c-5095-4492-b332-3f059c0ef561" />
<img width="1576" height="982" alt="image" src="https://github.com/user-attachments/assets/b21318c1-b21a-4b05-bd72-051d0c3ebd27" />
